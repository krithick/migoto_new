graph LR
    subgraph "Authentication APIs"
        AUTH_LOGIN[POST /auth/login<br/>ğŸ” User Login]
        AUTH_TOKEN[POST /auth/token<br/>ğŸ« OAuth2 Token]
        AUTH_ME[GET /auth/users/me<br/>ğŸ‘¤ Current User Profile]
        AUTH_CHANGE_PWD[POST /auth/password/change<br/>ğŸ”‘ Change Password]
    end
    
    subgraph "User Management APIs"
        USER_CREATE[POST /auth/users<br/>â• Create Users Bulk]
        USER_LIST[GET /auth/users<br/>ğŸ“‹ List Users]
        USER_GET[GET /auth/users/id<br/>ğŸ‘¤ Get User Details]
        USER_UPDATE[PUT /auth/users/id<br/>âœï¸ Update User]
        USER_DELETE[DELETE /auth/users/id<br/>ğŸ—‘ï¸ Delete User]
        USER_DETAILED[GET /auth/users/id/detailed<br/>ğŸ” Admin User View]
        USER_EXTEND_DEMO[POST /auth/users/extend-demo-hierarchy<br/>â° Extend Demo Account]
    end
    
    subgraph "Chat & Conversation APIs"
        CHAT_INIT[POST /chat/initialize<br/>ğŸš€ Start Chat Session]
        CHAT_SEND[POST /chat<br/>ğŸ’¬ Send Message]
        CHAT_STREAM[GET /chat/stream<br/>ğŸ“¡ Real-time Stream SSE]
        CHAT_HISTORY[GET /chat/history/id<br/>ğŸ“œ Conversation History]
        CHAT_EVALUATE[POST /chat/evaluate/id<br/>ğŸ“Š Generate Analysis]
        CHAT_DEMO[GET /chat/demo<br/>ğŸ® Interactive Demo]
    end
    
    subgraph "Learning Management APIs"
        COURSE_CREATE[POST /courses<br/>ğŸ“š Create Course]
        COURSE_LIST[GET /courses<br/>ğŸ“– List Courses]
        MODULE_CREATE[POST /modules<br/>ğŸ“‘ Create Module]
        MODULE_LIST[GET /modules<br/>ğŸ“„ List Modules]
        SCENARIO_CREATE[POST /scenarios<br/>ğŸ­ Create Scenario]
        SCENARIO_LIST[GET /scenarios<br/>ğŸª List Scenarios]
        SCENARIO_ASSIGN[POST /scenario-assignments<br/>ğŸ“Œ Assign Scenarios]
    end
    
    subgraph "Analytics & Progress APIs"
        PROGRESS_DASHBOARD[GET /auth/users/me/progress-dashboard<br/>ğŸ“ˆ User Progress Dashboard]
        COMPLETED_SCENARIOS[GET /auth/users/me/completed-scenario-analysis<br/>âœ… Completed Analysis]
        SCENARIO_MODE_ANALYSIS[GET /scenario/id/mode/mode/analysis<br/>ğŸ”¬ Mode-specific Analysis]
        ADMIN_USER_SESSIONS[GET /admin/users/id/scenario-sessions<br/>ğŸ‘¨ğŸ’¼ Admin Session View]
        COMPANY_ANALYTICS[GET /auth/analytics/company/id<br/>ğŸ¢ Company Analytics]
    end
    
    subgraph "Company & Multi-tenancy APIs"
        COMPANY_CREATE[POST /companies<br/>ğŸ¢ Create Company]
        COMPANY_LIST[GET /companies<br/>ğŸ¬ List Companies]
        COMPANY_UPDATE[PUT /companies/id<br/>âœï¸ Update Company]
        TIER_ASSIGN[POST /tiers/id/assign<br/>â­ Assign Tier]
        TIER_LIMITS[GET /tiers/limits/company_id<br/>ğŸ“Š Check Limits]
    end
    
    subgraph "Avatar & AI Management APIs"
        AVATAR_CREATE[POST /avatars<br/>ğŸ¤– Create Avatar]
        AVATAR_LIST[GET /avatars<br/>ğŸ‘¥ List Avatars]
        PERSONA_CREATE[POST /personas<br/>ğŸ­ Create Persona]
        PERSONA_LIST[GET /personas<br/>ğŸª List Personas]
        BOT_CREATE[POST /bots<br/>ğŸ§  Create Bot Config]
        BOT_ANALYZER[POST /bots/analyzers<br/>ğŸ” Create Analyzer Bot]
        SESSION_ANALYZE[GET /session-analyzer/id<br/>ğŸ“Š Analyze Session]
    end
    
    subgraph "File & Knowledge Management APIs"
        UPLOAD_AUDIO[POST /upload/audio<br/>ğŸµ Upload Audio]
        UPLOAD_DOCUMENT[POST /upload/document<br/>ğŸ“„ Upload Document]
        UPLOAD_VIDEO[POST /upload/video<br/>ğŸ¥ Upload Video]
        KB_CREATE[POST /knowledge-bases<br/>ğŸ§  Create Knowledge Base]
        KB_SEARCH[POST /knowledge-bases/id/search<br/>ğŸ” Search Knowledge]
        FACT_CHECK[POST /knowledge-bases/id/fact-check<br/>âœ… Fact Check]
    end
    
    subgraph "Administrative APIs"
        SYSTEM_HEALTH[GET /admin/system/health<br/>ğŸ’š System Health]
        SYSTEM_METRICS[GET /admin/system/metrics<br/>ğŸ“Š System Metrics]
        FEATURE_TOGGLE[POST /admin/features/id/toggle<br/>ğŸ›ï¸ Feature Flags]
        TIER_MANAGEMENT[GET /admin/tiers<br/>â­ Manage Tiers]
    end
    
    %% API Flow Connections
    AUTH_LOGIN --> USER_CREATE
    USER_CREATE --> COURSE_CREATE
    COURSE_CREATE --> MODULE_CREATE
    MODULE_CREATE --> SCENARIO_CREATE
    SCENARIO_CREATE --> SCENARIO_ASSIGN
    SCENARIO_ASSIGN --> CHAT_INIT
    CHAT_INIT --> CHAT_SEND
    CHAT_SEND --> CHAT_STREAM
    CHAT_STREAM --> CHAT_EVALUATE
    CHAT_EVALUATE --> PROGRESS_DASHBOARD
    
    %% Authentication Required
    AUTH_LOGIN -.-> AUTH_ME
    AUTH_LOGIN -.-> USER_LIST
    AUTH_LOGIN -.-> CHAT_INIT
    AUTH_LOGIN -.-> PROGRESS_DASHBOARD
    
    %% Admin Only APIs
    USER_CREATE -.-> COMPANY_CREATE
    COMPANY_CREATE -.-> TIER_ASSIGN
    SCENARIO_CREATE -.-> BOT_CREATE
    
    %% File Dependencies
    AVATAR_CREATE --> UPLOAD_AUDIO
    SCENARIO_CREATE --> UPLOAD_VIDEO
    KB_CREATE --> UPLOAD_DOCUMENT
    
    %% Styling
    classDef authAPI fill:#ff7675,stroke:#d63031,color:#fff
    classDef userAPI fill:#74b9ff,stroke:#0984e3,color:#fff
    classDef chatAPI fill:#00b894,stroke:#00a085,color:#fff
    classDef learningAPI fill:#fdcb6e,stroke:#e17055,color:#fff
    classDef analyticsAPI fill:#a29bfe,stroke:#6c5ce7,color:#fff
    classDef companyAPI fill:#fd79a8,stroke:#e84393,color:#fff
    classDef avatarAPI fill:#55a3ff,stroke:#2d3436,color:#fff
    classDef fileAPI fill:#00cec9,stroke:#00b894,color:#fff
    classDef adminAPI fill:#e17055,stroke:#d63031,color:#fff
    
    class AUTH_LOGIN,AUTH_TOKEN,AUTH_ME,AUTH_CHANGE_PWD authAPI
    class USER_CREATE,USER_LIST,USER_GET,USER_UPDATE,USER_DELETE,USER_DETAILED,USER_EXTEND_DEMO userAPI
    class CHAT_INIT,CHAT_SEND,CHAT_STREAM,CHAT_HISTORY,CHAT_EVALUATE,CHAT_DEMO chatAPI
    class COURSE_CREATE,COURSE_LIST,MODULE_CREATE,MODULE_LIST,SCENARIO_CREATE,SCENARIO_LIST,SCENARIO_ASSIGN learningAPI
    class PROGRESS_DASHBOARD,COMPLETED_SCENARIOS,SCENARIO_MODE_ANALYSIS,ADMIN_USER_SESSIONS,COMPANY_ANALYTICS analyticsAPI
    class COMPANY_CREATE,COMPANY_LIST,COMPANY_UPDATE,TIER_ASSIGN,TIER_LIMITS companyAPI
    class AVATAR_CREATE,AVATAR_LIST,PERSONA_CREATE,PERSONA_LIST,BOT_CREATE,BOT_ANALYZER,SESSION_ANALYZE avatarAPI
    class UPLOAD_AUDIO,UPLOAD_DOCUMENT,UPLOAD_VIDEO,KB_CREATE,KB_SEARCH,FACT_CHECK fileAPI
    class SYSTEM_HEALTH,SYSTEM_METRICS,FEATURE_TOGGLE,TIER_MANAGEMENT adminAPI