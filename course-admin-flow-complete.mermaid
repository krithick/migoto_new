flowchart TD
    subgraph "1. Account & Auth"
        A1["POST /auth/login"] --> A2["Authentication Token"]
    end

    subgraph "2. Course Operations"
        B1["POST /courses/"] --> B2["Course Created"]
        B3["GET /courses/"] --> B4["List All Courses"]
        B5["GET /courses/{id}"] --> B6["View Course Details"]
        B7["GET /courses/{id}/full"] --> B8["View Course with Modules"]
        B9["PUT /courses/{id}"] --> B10["Update Course"]
        B11["DELETE /courses/{id}"] --> B12["Delete Course"]
    end

    subgraph "3. Module Operations"
        C1["POST /courses/{course_id}/modules"] --> C2["Module Created"]
        C3["GET /modules/"] --> C4["List All Modules"]
        C5["GET /modules/{id}"] --> C6["View Module Details"]
        C7["GET /modules/{id}/full"] --> C8["View Module with Scenarios"]
        C9["PUT /modules/{id}"] --> C10["Update Module"]
        C11["DELETE /modules/{id}"] --> C12["Delete Module"]
    end

    subgraph "4. File Operations"
        D1["POST /uploads/ (file_type: document)"] --> D2["Document Uploaded"]
        D3["POST /uploads/ (file_type: video)"] --> D4["Video Uploaded"]
        D5["GET /uploads/"] --> D6["List All Uploads"]
        D7["GET /uploads/{id}"] --> D8["View Upload Details"]
        D9["DELETE /uploads/{id}"] --> D10["Delete Upload"]
        
        D11["POST /documents/from-upload"] --> D12["Document Created"]
        D13["GET /documents/"] --> D14["List All Documents"]
        D15["GET /documents/{id}"] --> D16["View Document Details"]
        D17["PUT /documents/{id}"] --> D18["Update Document"] 
        D19["DELETE /documents/{id}"] --> D20["Delete Document"]
        
        D21["POST /videos/from-upload"] --> D22["Video Created"]
        D23["GET /videos/"] --> D24["List All Videos"]
        D25["GET /videos/{id}"] --> D26["View Video Details"]
        D27["PUT /videos/{id}"] --> D28["Update Video"]
        D29["DELETE /videos/{id}"] --> D30["Delete Video"]
    end

    subgraph "5. Component Operations"
        E1["POST /personas/"] --> E2["Persona Created"]
        E3["GET /personas/"] --> E4["List All Personas"]
        E5["GET /personas/{id}"] --> E6["View Persona Details"]
        E7["PUT /personas/{id}"] --> E8["Update Persona"]
        E9["DELETE /personas/{id}"] --> E10["Delete Persona"]
        
        F1["POST /environments/"] --> F2["Environment Created"]
        F3["GET /environments/"] --> F4["List All Environments"]
        F5["GET /environments/{id}"] --> F6["View Environment Details"]
        F7["PUT /environments/{id}"] --> F8["Update Environment"]
        F9["DELETE /environments/{id}"] --> F10["Delete Environment"]
        
        G1["POST /languages/"] --> G2["Language Created"]
        G3["GET /languages/"] --> G4["List All Languages"]
        G5["GET /languages/{id}"] --> G6["View Language Details"]
        G7["PUT /languages/{id}"] --> G8["Update Language"]
        G9["DELETE /languages/{id}"] --> G10["Delete Language"]
        
        H1["POST /bot-voices/"] --> H2["Bot Voice Created"]
        H3["GET /bot-voices/"] --> H4["List All Bot Voices"]
        H5["GET /bot-voices/{id}"] --> H6["View Bot Voice Details"]
        H7["PUT /bot-voices/{id}"] --> H8["Update Bot Voice"]
        H9["DELETE /bot-voices/{id}"] --> H10["Delete Bot Voice"]
        
        I1["POST /avatars/"] --> I2["Avatar Created"]
        I3["GET /avatars/"] --> I4["List All Avatars"]
        I5["GET /avatars/{id}"] --> I6["View Avatar Details"]
        I7["PUT /avatars/{id}"] --> I8["Update Avatar"]
        I9["DELETE /avatars/{id}"] --> I10["Delete Avatar"]
        
        J1["POST /avatar-interactions/"] --> J2["Avatar Interaction Created"]
        J3["GET /avatar-interactions/"] --> J4["List All Avatar Interactions"]
        J5["GET /avatar-interactions/{id}"] --> J6["View Avatar Interaction Details"]
        J7["PUT /avatar-interactions/{id}"] --> J8["Update Avatar Interaction"]
        J9["DELETE /avatar-interactions/{id}"] --> J10["Delete Avatar Interaction"]
        J11["PUT /avatar-interactions/{id}/documents"] --> J12["Documents Assigned"]
        J13["PUT /avatar-interactions/{id}/videos"] --> J14["Videos Assigned"]
    end

    subgraph "6. Scenario Operations"
        K1["POST /scenario/create-template"] --> K2["Scenario Template Created"]
        K3["POST /scenario/generate-scenario"] --> K4["Scenario Generated"]
        K5["POST /modules/{module_id}/scenarios"] --> K6["Scenario Created & Added to Module"]
        K7["GET /scenarios/"] --> K8["List All Scenarios"]
        K9["GET /scenarios/{id}"] --> K10["View Scenario Details"]
        K11["GET /scenarios/{id}/full"] --> K12["View Scenario with All Modes"]
        K13["PUT /scenarios/{id}"] --> K14["Update Scenario Base Info"]
        K15["PUT /scenarios/{id}/{mode_type}"] --> K16["Update Scenario Mode"]
        K17["DELETE /scenarios/{id}"] --> K18["Delete Scenario"]
    end

    subgraph "7. Assignment Operations"
        L1["POST /courses/assign"] --> L2["Course Assigned to Users"]
        L3["POST /module-assignments/bulk"] --> L4["Modules Assigned"]
        L5["POST /scenario-assignments/bulk"] --> L6["Scenarios Assigned"]
        L7["GET /users/{user_id}/courses"] --> L8["List User's Courses"]
        L9["GET /module-assignments/user/{user_id}"] --> L10["List User's Modules"]
        L11["GET /scenario-assignments/user/{user_id}"] --> L12["List User's Scenarios"]
        L13["DELETE /module-assignments/{id}"] --> L14["Delete Module Assignment"]
        L15["DELETE /scenario-assignments/{id}"] --> L16["Delete Scenario Assignment"]
    end

    A2 --> B1 & B3 & B5 & B7
    B2 --> C1
    B2 --> B9 & B11
    C2 --> C9 & C11
    A2 --> D1 & D3 & D5 & D7
    D2 --> D11
    D4 --> D21
    D2 --> D9
    D4 --> D9
    D12 --> D17 & D19
    D22 --> D27 & D29
    A2 --> E1 & E3 & E5
    E2 --> E7 & E9
    A2 --> F1 & F3 & F5
    F2 --> F7 & F9
    A2 --> G1 & G3 & G5
    G2 --> G7 & G9
    A2 --> H1 & H3 & H5
    H2 --> H7 & H9
    A2 --> I1 & I3 & I5
    I2 --> I7 & I9
    A2 --> J1 & J3 & J5
    J2 --> J7 & J9 & J11 & J13
    A2 --> K1 & K7 & K9 & K11
    K2 --> K3
    K4 --> K5
    K6 --> K13 & K15 & K17
    A2 --> L1 & L3 & L5 & L7 & L9 & L11
    L2 --> L13
    L4 --> L15

    style A1 fill:#f9f,stroke:#333,stroke-width:2px
    style B1 fill:#bbf,stroke:#333,stroke-width:2px
    style B3 fill:#ddf,stroke:#333,stroke-width:2px
    style B9 fill:#ddf,stroke:#333,stroke-width:2px
    style B11 fill:#fdd,stroke:#333,stroke-width:2px
    style C1 fill:#bbf,stroke:#333,stroke-width:2px
    style C3 fill:#ddf,stroke:#333,stroke-width:2px
    style C9 fill:#ddf,stroke:#333,stroke-width:2px
    style C11 fill:#fdd,stroke:#333,stroke-width:2px
    style D1 fill:#bfb,stroke:#333,stroke-width:2px
    style D3 fill:#bfb,stroke:#333,stroke-width:2px
    style D5 fill:#dfd,stroke:#333,stroke-width:2px
    style D9 fill:#fdd,stroke:#333,stroke-width:2px
    style D19 fill:#fdd,stroke:#333,stroke-width:2px
    style D29 fill:#fdd,stroke:#333,stroke-width:2px
    style L1 fill:#ff9,stroke:#333,stroke-width:2px
    style L7 fill:#ffd,stroke:#333,stroke-width:2px
    style L13 fill:#fdd,stroke:#333,stroke-width:2px
    style L15 fill:#fdd,stroke:#333,stroke-width:2px
